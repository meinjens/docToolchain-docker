sudo: required
services:
- docker
env:
  global:
  - secure: 1gzAmbFQ4GKMCLzh06QjnqKiQK4amigZK8XWcO3acSfToHo1KDVTmcsuuw4GAfR3rnIgmoa8YJI1shdFlmtL9z0UbDT7BIwwaP2Duk43kZequs+XZcfmzIbsyBs+pGxU5aIkSqHcitDVoKfvDin/GIK0P2FRMyytiSKHuGNTr6nXNl8Ojrp1KNDoSjQemMCEoskdRYJvD6H+35BNwmVOPCQJV0o05hvsxvC6ZpBHHm66wpdys66qh4SLe30FToQjBoH6KXsruLWQAfXtNe7MffpQc4fXXM6yQ956bFDHMEaQfHewrOyA3iW450LUzTOHNaCABfr4ttXZr7OgF0wEYnuBqgxgqS5gdXysHd1TsHJshA6tbiNgJ2h5HFIFivXL1nGeRhHxj6Z8uA3gj/hPXa5zwgR7rbww4/80H5A7w7q2hH6x4nEzeDA1Hp5mIFKHtt73NR0R+1ddwP/1Bbi3tOqYlcil6Xnnq6fzaZMz3v6R+VrlhweAd8ElxmEK+eEbBVNI/HI7RjXpLnIGDHZkkszHVAvgq6dh/mwpeckYYp6/3csVgHmDma5VRJBs6owOZTuDmqIeFTQs0dWEz6Del2QtWslOD8BhAdsyWZKEXt8bi9YFKlURKPeNCKUfJNr6Tz+vmpk08P3AmO5ZiIv2oFaE6OV51r25gkb0JC4ctZA=
  - secure: QqwDEMHgCrbDMxyG681f7RbidmQKEqrSqn1V8rM8xtQOFzeIPcdXrgI4ymjDfCXUJ+v+xCcebh/wKdH34kdSNfI+wzhqNbwchLe3mJ8GHG6S5nOrULSksnaPW5rbOJH2fVmf3/MO9Jfc1ekjCRqoVeV2+lHci4nXP/e8OWxhqp82e+vqIqL1l4CD3XHjcRENwXShw9KEDW/JZEVBCL9M4Vsfve8aFfTx4USfa94kLXdQPpqaM8UYvsCqdK2X+hwWTYEEa3KfZN8R0SPKYL4fZDr/dxPsxwgFZcUG+ljYs79ye29akwR+PIRwaAd8kdDGfLXxQ2pmoOPBlroTiMRaLx43zP0a/1DSSjnajx/Wty6w/wiTgf7lRLjUGYXqm4qd6PWp0i37jZSmrKRvG4Kc42+0fC+/sjeITdtIKhJ07cMEmXM/ldkA65PUlqX4lkSkohuEVcG678il2XpzUQEdWAT8vWbr+JnNaF81eUo2D+3CNDPQNz9wUyiqOP9H+wmS49Jcx0nmJIunQVwC0RiogB3nFF+X8IFWRxJVGljIhMAVlYqKG2IFpb+uHYcamDk0jsszLDtJVtgs1TGX0iJQ0+5yCk/SsZaYoEL9R1a/XdXQy1pMpwnyezndbpuaAWHfnpXlmjXFyJAQvTKgihnoO/78JMSEXvJFuAPX4V5vv+w=
  - secure: sj+WnpBnopXYcmOt6VtOT4hWYdLEjS3hlYMCn/3O7eUk1ChmExQNYYSBrrjxWCMB0wqnqo9JBUkg6j2SZQt/AF+yYji8ufIzKipmnwPywGpAjdCZ7x8+uX2I5E2DkU5u+atDw2Jv789LT8bdR3ABpSlH5GJptrgEigXaZciqrHvQeJAsA3AgjxjiXbfjpnXMvuF140Huv8FMwVgPnNxhvzBVEzT3l8ZIAKkUd3xInDlUA86XsfcFIMrrS69RyNpCAadlnJrPD5NDZz3ZQF+LP/j+HLIDt100+hy/66Vc4ho1pL74pdp0XOveQYEzEEqNYNBN7rcNfZEotT0UhPG8ckvMIvimo4joa58ZHC2KPZic6BO0+1SKFr7x0j854q+G1DxTd6GUsh0An4Tnzjhd/Mgq9EGEqvS9rn9wLgnWBXohkhZemQowpDuR8EGHZjtwC5mw9p97O7DAvQrdVvVdE8EhFWBZPk24PBzt624xADFDQxY9mSY+y4uXyssh4J7FOyprVlThMBQj7febKb32nnh1pSH5zNrdf2/FihJlHs4roTEDIfqKzntW9p1Tmspz0HO1fgiBPtN9FYHPh1Frd4Qf5cv4j0E1R82nnrTdhX2MqNnjmc1dyDDbWlbtnENj97oI16Y1vjtWNaTsqudKFykvCkdJ70IvkkK+QIawXKY=

after_success:
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH; fi`
- export IMAGE_NAME="meinjens/docToolchain"
- docker build -t $IMAGE_NAME:$TRAVIS_COMMIT .
- docker tag $IMAGE_NAME:$TRAVIS_COMMIT $IMAGE_NAME:$TAG
- docker push $IMAGE_NAME
